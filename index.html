<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Annealing Time Calculator</title>

  <style>
    body { font-family: Arial, Helvetica, sans-serif; padding: 24px; max-width: 520px; margin: auto; }
    h1 { margin-bottom: 14px; }
    label { display:block; margin-top: 14px; font-weight: bold; }
    input { width:100%; padding: 10px; margin-top: 6px; font-size: 16px; box-sizing: border-box; }
    button { margin-top: 18px; padding: 12px; width: 100%; font-size: 16px; cursor: pointer; }
    #result { margin-top: 18px; font-size: 18px; font-weight: bold; }
    .note { margin-top: 12px; font-size: 12px; color: #555; line-height: 1.4; }
  </style>
</head>

<body>
  <h1>Annealing Time Calculator</h1>

  <label>
    Starting hardness (HV₀):
    <input id="hvStart" type="number" step="0.1" inputmode="decimal" placeholder="e.g., 320">
  </label>

  <label>
    Desired hardness (HVᵈ):
    <input id="hvTarget" type="number" step="0.1" inputmode="decimal" placeholder="e.g., 220">
  </label>

  <button id="calculateBtn" type="button">Calculate annealing time</button>

  <div id="result"></div>

  <div class="note">
    Model: t = (exp((HV₀ − HVᵈ)/β) − 1) / α<br>
    This page assumes <strong>α is in s⁻¹</strong>, so t is computed in <strong>seconds</strong> and then converted to <strong>minutes</strong> (minutes = seconds / 60).
  </div>

  <script>
    // ===== MODEL CONSTANTS =====
    // IMPORTANT: α must be in 1/second (s⁻¹) in this version
    const alpha = 0.00118; // s⁻¹  <-- replace with your real α (in 1/second)
    const beta  = 37.47;   // HV   <-- replace with your real β
    // ==========================

    document.getElementById("calculateBtn").addEventListener("click", () => {
      const hvStart  = Number(document.getElementById("hvStart").value);
      const hvTarget = Number(document.getElementById("hvTarget").value);
      const resultEl = document.getElementById("result");

      // Basic validation
      if (!Number.isFinite(hvStart) || !Number.isFinite(hvTarget)) {
        resultEl.textContent = "Please enter both hardness values.";
        return;
      }
      if (hvStart <= 0 || hvTarget <= 0) {
        resultEl.textContent = "HV values must be greater than 0.";
        return;
      }
      if (hvTarget >= hvStart) {
        resultEl.textContent = "Desired hardness must be lower than starting hardness.";
        return;
      }
      if (!(alpha > 0) || !(beta > 0)) {
        resultEl.textContent = "Invalid model parameters (α or β must be > 0).";
        return;
      }

      // Compute time in seconds using your equation
      const timeSeconds = (Math.exp((hvStart - hvTarget) / beta) - 1) / alpha;

      if (!Number.isFinite(timeSeconds) || timeSeconds < 0) {
        resultEl.textContent = "Calculation invalid/overflow. Check α, β, and HV range.";
        return;
      }

      // Convert to minutes for display
      const timeMinutes = timeSeconds / 60.0;

      resultEl.textContent = "Annealing time: " + timeMinutes.toFixed(2) + " minutes";
    });
  </script>
</body>
</html>
